import{a as F,f as R,r as l,g as T,h as c,aj as m,j as s,B,T as h,F as N,i as A,p as I,e as $,k,l as V,m as W,I as z,V as D,n as E,q as M}from"./index-Bn-mPDw0.js";const Z={old_password:"",new_password:"",confirm_password:""},G=()=>{const u=F(),{showToast:w}=R(),x=$(),[f,g]=l.useState(!1),[_,j]=l.useState(!1),[b,S]=l.useState(!1),y=()=>g(e=>!e),P=()=>j(e=>!e),q=()=>S(e=>!e),d=({label:e,name:o,value:a,handleChange:r,handleBlur:t,error:n,touched:i,show:p,toggle:v})=>s.jsxs(k,{fullWidth:!0,error:!!(i&&n),children:[s.jsx(h,{sx:{mx:.5,mb:.4},children:e}),s.jsx(V,{id:o,name:o,type:p?"text":"password",placeholder:e,value:a,onChange:r,onBlur:t,error:i&&!!n,InputProps:{endAdornment:s.jsx(W,{position:"end",children:s.jsx(z,{onClick:v,edge:"end",children:p?s.jsx(D,{}):s.jsx(E,{})})})}}),i&&n&&s.jsx(M,{sx:{mt:.5,mx:0},children:n})]}),O=T({old_password:c().required("Required").min(8,"Min 8 chars").matches(/[A-Z]/,"1 uppercase").matches(/[a-z]/,"1 lowercase").matches(/[0-9]/,"1 number").matches(/[@$!%*?&]/,"1 special char"),new_password:c().required("Required").min(8,"Min 8 chars").matches(/[A-Z]/,"1 uppercase").matches(/[a-z]/,"1 lowercase").matches(/[0-9]/,"1 number").matches(/[@$!%*?&]/,"1 special char").notOneOf([m("old_password")],"New password must be different from old password"),confirm_password:c().oneOf([m("new_password"),null],"Passwords must match").required("Required")}),C=async e=>{const{old_password:o,new_password:a,confirm_password:r}=e,{data:t,status:n,error:i}=await x("/api/profile/changePassword","POST",{old_password:o,new_password:a,confirm_password:r});n===200?(w(t.message,"success"),u("/admin/dashboard")):w(i,"error")};return s.jsxs(B,{sx:{padding:4,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[s.jsx(h,{sx:{marginBottom:3,fontSize:"2.5rem"},variant:"h5",fontWeight:500,children:"Change Password"}),s.jsx(N,{initialValues:Z,validationSchema:O,onSubmit:C,children:({values:e,errors:o,touched:a,handleChange:r,handleBlur:t})=>s.jsxs(A,{style:{width:"100%",maxWidth:300,display:"flex",flexDirection:"column",gap:"16px"},children:[s.jsx(d,{label:"Old Password",name:"old_password",value:e.old_password,handleChange:r,handleBlur:t,error:o.old_password,touched:a.old_password,show:f,toggle:y}),s.jsx(d,{label:"New Password",name:"new_password",value:e.new_password,handleChange:r,handleBlur:t,error:o.new_password,touched:a.new_password,show:_,toggle:P}),s.jsx(d,{label:"Confirm Password",name:"confirm_password",value:e.confirm_password,handleChange:r,handleBlur:t,error:o.confirm_password,touched:a.confirm_password,show:b,toggle:q}),s.jsx(I,{type:"submit",sx:{bgcolor:"black",color:"white",fontWeight:"500",padding:"12px",borderRadius:"10px"},variant:"outlined",children:"Save"})]})})]})};export{G as default};
